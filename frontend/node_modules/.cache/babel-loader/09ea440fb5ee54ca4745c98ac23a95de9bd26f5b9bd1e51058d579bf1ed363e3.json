{"ast":null,"code":"var _jsxFileName = \"/Users/nnt/Documents/Projects/Online_PetShop/frontend/src/context/ShopContext.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ShopContext = /*#__PURE__*/createContext(null);\nconst ShopContextProvider = props => {\n  _s();\n  const API_URL = process.env.REACT_APP_API_URL;\n  const [products, setProducts] = useState([]); // State to store fetched product data\n  const [brands, setBrands] = useState([]);\n  const [cartItems, setCartItems] = useState(() => {\n    // Load initial cart data from localStorage or initialize with an empty object\n    const savedCart = localStorage.getItem(\"cartItems\");\n    return savedCart ? JSON.parse(savedCart) : {};\n  });\n\n  // Combined data fetching useEffect\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        // Fetch products\n        const productResponse = await fetch(`${API_URL}/products/allproducts`);\n        const productData = await productResponse.json();\n        setProducts(productData);\n\n        // Fetch brands\n        const brandResponse = await fetch(`${API_URL}/brands/allbrands`);\n        const brandData = await brandResponse.json();\n        setBrands(brandData);\n      } catch (error) {\n        console.error(\"Error fetching data:\", error);\n      }\n    };\n    fetchData();\n  }, [API_URL]);\n\n  // Sync cart data with localStorage whenever cartItems changes\n  useEffect(() => {\n    localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n  }, [cartItems]);\n\n  // Cart operations\n  const addToCart = (itemId, quantity = 1) => {\n    setCartItems(prev => ({\n      ...prev,\n      [itemId]: (prev[itemId] || 0) + quantity\n    }));\n  };\n  const removeFromCart = itemId => {\n    setCartItems(prev => ({\n      ...prev,\n      [itemId]: Math.max((prev[itemId] || 0) - 1, 0)\n    }));\n  };\n  const updateCartQuantity = (itemId, newQuantity) => {\n    setCartItems(prev => ({\n      ...prev,\n      [itemId]: newQuantity\n    }));\n  };\n  const clearItemFromCart = itemId => {\n    setCartItems(prev => {\n      const newCart = {\n        ...prev\n      };\n      delete newCart[itemId];\n      return newCart;\n    });\n  };\n  const getTotalCartValue = () => {\n    return products.reduce((total, product) => {\n      const quantity = cartItems[product.id] || 0;\n      return total + product.price * quantity;\n    }, 0);\n  };\n  const getTotalItems = () => {\n    return Object.values(cartItems).reduce((total, quantity) => total + quantity, 0);\n  };\n  const clearAllItemsFromCart = () => {\n    setCartItems({});\n  };\n\n  // Context value\n  const contextValue = {\n    all_products: products,\n    all_brands: brands,\n    cartItems,\n    addToCart,\n    removeFromCart,\n    updateCartQuantity,\n    clearItemFromCart,\n    getTotalCartValue,\n    getTotalItems,\n    clearAllItemsFromCart\n  };\n  return /*#__PURE__*/_jsxDEV(ShopContext.Provider, {\n    value: contextValue,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 9\n  }, this);\n};\n_s(ShopContextProvider, \"SFqRIK9RPfa3wyVy84GjHMBogcA=\");\n_c = ShopContextProvider;\nexport default ShopContextProvider;\nvar _c;\n$RefreshReg$(_c, \"ShopContextProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","jsxDEV","_jsxDEV","ShopContext","ShopContextProvider","props","_s","API_URL","process","env","REACT_APP_API_URL","products","setProducts","brands","setBrands","cartItems","setCartItems","savedCart","localStorage","getItem","JSON","parse","fetchData","productResponse","fetch","productData","json","brandResponse","brandData","error","console","setItem","stringify","addToCart","itemId","quantity","prev","removeFromCart","Math","max","updateCartQuantity","newQuantity","clearItemFromCart","newCart","getTotalCartValue","reduce","total","product","id","price","getTotalItems","Object","values","clearAllItemsFromCart","contextValue","all_products","all_brands","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/nnt/Documents/Projects/Online_PetShop/frontend/src/context/ShopContext.jsx"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\n\nexport const ShopContext = createContext(null);\n\nconst ShopContextProvider = (props) => {\n    const API_URL = process.env.REACT_APP_API_URL;\n\n    const [products, setProducts] = useState([]); // State to store fetched product data\n    const [brands, setBrands] = useState([]);\n    const [cartItems, setCartItems] = useState(() => {\n        // Load initial cart data from localStorage or initialize with an empty object\n        const savedCart = localStorage.getItem(\"cartItems\");\n        return savedCart ? JSON.parse(savedCart) : {};\n    });\n\n    // Combined data fetching useEffect\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                // Fetch products\n                const productResponse = await fetch(`${API_URL}/products/allproducts`);\n                const productData = await productResponse.json();\n                setProducts(productData);\n\n                // Fetch brands\n                const brandResponse = await fetch(`${API_URL}/brands/allbrands`);\n                const brandData = await brandResponse.json();\n                setBrands(brandData);\n            } catch (error) {\n                console.error(\"Error fetching data:\", error);\n            }\n        };\n\n        fetchData();\n    }, [API_URL]);\n\n    // Sync cart data with localStorage whenever cartItems changes\n    useEffect(() => {\n        localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n    }, [cartItems]);\n\n    // Cart operations\n    const addToCart = (itemId, quantity = 1) => {\n        setCartItems((prev) => ({ ...prev, [itemId]: (prev[itemId] || 0) + quantity }));\n    };\n\n    const removeFromCart = (itemId) => {\n        setCartItems((prev) => ({\n            ...prev,\n            [itemId]: Math.max((prev[itemId] || 0) - 1, 0),\n        }));\n    };\n\n    const updateCartQuantity = (itemId, newQuantity) => {\n        setCartItems((prev) => ({ ...prev, [itemId]: newQuantity }));\n    };\n\n    const clearItemFromCart = (itemId) => {\n        setCartItems((prev) => {\n            const newCart = { ...prev };\n            delete newCart[itemId];\n            return newCart;\n        });\n    };\n\n    const getTotalCartValue = () => {\n        return products.reduce((total, product) => {\n            const quantity = cartItems[product.id] || 0;\n            return total + product.price * quantity;\n        }, 0);\n    };\n\n    const getTotalItems = () => {\n        return Object.values(cartItems).reduce((total, quantity) => total + quantity, 0);\n    };\n\n    const clearAllItemsFromCart = () => {\n        setCartItems({});\n    };\n\n    // Context value\n    const contextValue = {\n        all_products: products,\n        all_brands: brands,\n        cartItems,\n        addToCart,\n        removeFromCart,\n        updateCartQuantity,\n        clearItemFromCart,\n        getTotalCartValue,\n        getTotalItems,\n        clearAllItemsFromCart,\n    };\n\n    return (\n        <ShopContext.Provider value={contextValue}>\n            {props.children}\n        </ShopContext.Provider>\n    );\n};\n\nexport default ShopContextProvider;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}