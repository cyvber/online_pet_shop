{"ast":null,"code":"var _jsxFileName = \"/Users/nnt/Documents/Projects/Online_PetShop/frontend/src/context/ShopContext.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ShopContext = /*#__PURE__*/createContext(null);\nconst ShopContextProvider = props => {\n  _s();\n  const [products, setProducts] = useState([]); // State to store fetched product data\n  const [cartItems, setCartItems] = useState({}); // State to store cart items\n\n  // Fetch product data from the backend\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const response = await fetch(\"http://localhost:4000/allproducts\");\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch products\");\n        }\n        const data = await response.json();\n        setProducts(data);\n\n        // Initialize the cart with product IDs\n        const initialCart = {};\n        data.forEach(product => {\n          initialCart[product.id] = 0;\n        });\n        setCartItems(initialCart);\n      } catch (error) {\n        console.error(\"Error fetching products:\", error);\n      }\n    };\n    fetchProducts();\n  }, []);\n  const addToCart = (itemId, quantity = 1) => {\n    setCartItems(prev => ({\n      ...prev,\n      [itemId]: prev[itemId] + quantity\n    }));\n  };\n  const removeFromCart = itemId => {\n    setCartItems(prev => ({\n      ...prev,\n      [itemId]: Math.max(prev[itemId] - 1, 0)\n    }));\n  };\n  const updateCartQuantity = (itemId, newQuantity) => {\n    setCartItems(prev => ({\n      ...prev,\n      [itemId]: newQuantity\n    }));\n  };\n  const clearItemFromCart = itemId => {\n    setCartItems(prev => ({\n      ...prev,\n      [itemId]: 0\n    }));\n  };\n  const getTotalCartValue = () => {\n    return products.reduce((total, product) => {\n      const quantity = cartItems[product.id] || 0;\n      return total + product.price * quantity;\n    }, 0);\n  };\n  const getTotalItems = () => {\n    return products.reduce((total, product) => {\n      return total + (cartItems[product.id] || 0);\n    }, 0);\n  };\n  const contextValue = {\n    products,\n    cartItems,\n    addToCart,\n    removeFromCart,\n    updateCartQuantity,\n    clearItemFromCart,\n    getTotalCartValue,\n    getTotalItems\n  };\n  return /*#__PURE__*/_jsxDEV(ShopContext.Provider, {\n    value: contextValue,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 9\n  }, this);\n};\n_s(ShopContextProvider, \"Rxl7v7iBpujQJ1zvH9Toucmduc0=\");\n_c = ShopContextProvider;\nexport default ShopContextProvider;\nvar _c;\n$RefreshReg$(_c, \"ShopContextProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","jsxDEV","_jsxDEV","ShopContext","ShopContextProvider","props","_s","products","setProducts","cartItems","setCartItems","fetchProducts","response","fetch","ok","Error","data","json","initialCart","forEach","product","id","error","console","addToCart","itemId","quantity","prev","removeFromCart","Math","max","updateCartQuantity","newQuantity","clearItemFromCart","getTotalCartValue","reduce","total","price","getTotalItems","contextValue","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/nnt/Documents/Projects/Online_PetShop/frontend/src/context/ShopContext.jsx"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\n\nexport const ShopContext = createContext(null);\n\nconst ShopContextProvider = (props) => {\n    const [products, setProducts] = useState([]); // State to store fetched product data\n    const [cartItems, setCartItems] = useState({}); // State to store cart items\n\n    // Fetch product data from the backend\n    useEffect(() => {\n        const fetchProducts = async () => {\n            try {\n                const response = await fetch(\"http://localhost:4000/allproducts\");\n                if (!response.ok) {\n                    throw new Error(\"Failed to fetch products\");\n                }\n                const data = await response.json();\n                setProducts(data);\n\n                // Initialize the cart with product IDs\n                const initialCart = {};\n                data.forEach((product) => {\n                    initialCart[product.id] = 0;\n                });\n                setCartItems(initialCart);\n            } catch (error) {\n                console.error(\"Error fetching products:\", error);\n            }\n        };\n\n        fetchProducts();\n    }, []);\n\n    const addToCart = (itemId, quantity = 1) => {\n        setCartItems((prev) => ({ ...prev, [itemId]: prev[itemId] + quantity }));\n    };\n\n    const removeFromCart = (itemId) => {\n        setCartItems((prev) => ({ ...prev, [itemId]: Math.max(prev[itemId] - 1, 0) }));\n    };\n\n    const updateCartQuantity = (itemId, newQuantity) => {\n        setCartItems((prev) => ({ ...prev, [itemId]: newQuantity }));\n    };\n\n    const clearItemFromCart = (itemId) => {\n        setCartItems((prev) => ({ ...prev, [itemId]: 0 }));\n    };\n\n    const getTotalCartValue = () => {\n        return products.reduce((total, product) => {\n            const quantity = cartItems[product.id] || 0;\n            return total + product.price * quantity;\n        }, 0);\n    };\n\n    const getTotalItems = () => {\n        return products.reduce((total, product) => {\n            return total + (cartItems[product.id] || 0);\n        }, 0);\n    };\n\n    const contextValue = {\n        products,\n        cartItems,\n        addToCart,\n        removeFromCart,\n        updateCartQuantity,\n        clearItemFromCart,\n        getTotalCartValue,\n        getTotalItems,\n    };\n\n    return (\n        <ShopContext.Provider value={contextValue}>\n            {props.children}\n        </ShopContext.Provider>\n    );\n};\n\nexport default ShopContextProvider;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElE,OAAO,MAAMC,WAAW,gBAAGL,aAAa,CAAC,IAAI,CAAC;AAE9C,MAAMM,mBAAmB,GAAIC,KAAK,IAAK;EAAAC,EAAA;EACnC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAC9C,MAAM,CAACU,SAAS,EAAEC,YAAY,CAAC,GAAGX,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;EAEhD;EACAC,SAAS,CAAC,MAAM;IACZ,MAAMW,aAAa,GAAG,MAAAA,CAAA,KAAY;MAC9B,IAAI;QACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,mCAAmC,CAAC;QACjE,IAAI,CAACD,QAAQ,CAACE,EAAE,EAAE;UACd,MAAM,IAAIC,KAAK,CAAC,0BAA0B,CAAC;QAC/C;QACA,MAAMC,IAAI,GAAG,MAAMJ,QAAQ,CAACK,IAAI,CAAC,CAAC;QAClCT,WAAW,CAACQ,IAAI,CAAC;;QAEjB;QACA,MAAME,WAAW,GAAG,CAAC,CAAC;QACtBF,IAAI,CAACG,OAAO,CAAEC,OAAO,IAAK;UACtBF,WAAW,CAACE,OAAO,CAACC,EAAE,CAAC,GAAG,CAAC;QAC/B,CAAC,CAAC;QACFX,YAAY,CAACQ,WAAW,CAAC;MAC7B,CAAC,CAAC,OAAOI,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MACpD;IACJ,CAAC;IAEDX,aAAa,CAAC,CAAC;EACnB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMa,SAAS,GAAGA,CAACC,MAAM,EAAEC,QAAQ,GAAG,CAAC,KAAK;IACxChB,YAAY,CAAEiB,IAAI,KAAM;MAAE,GAAGA,IAAI;MAAE,CAACF,MAAM,GAAGE,IAAI,CAACF,MAAM,CAAC,GAAGC;IAAS,CAAC,CAAC,CAAC;EAC5E,CAAC;EAED,MAAME,cAAc,GAAIH,MAAM,IAAK;IAC/Bf,YAAY,CAAEiB,IAAI,KAAM;MAAE,GAAGA,IAAI;MAAE,CAACF,MAAM,GAAGI,IAAI,CAACC,GAAG,CAACH,IAAI,CAACF,MAAM,CAAC,GAAG,CAAC,EAAE,CAAC;IAAE,CAAC,CAAC,CAAC;EAClF,CAAC;EAED,MAAMM,kBAAkB,GAAGA,CAACN,MAAM,EAAEO,WAAW,KAAK;IAChDtB,YAAY,CAAEiB,IAAI,KAAM;MAAE,GAAGA,IAAI;MAAE,CAACF,MAAM,GAAGO;IAAY,CAAC,CAAC,CAAC;EAChE,CAAC;EAED,MAAMC,iBAAiB,GAAIR,MAAM,IAAK;IAClCf,YAAY,CAAEiB,IAAI,KAAM;MAAE,GAAGA,IAAI;MAAE,CAACF,MAAM,GAAG;IAAE,CAAC,CAAC,CAAC;EACtD,CAAC;EAED,MAAMS,iBAAiB,GAAGA,CAAA,KAAM;IAC5B,OAAO3B,QAAQ,CAAC4B,MAAM,CAAC,CAACC,KAAK,EAAEhB,OAAO,KAAK;MACvC,MAAMM,QAAQ,GAAGjB,SAAS,CAACW,OAAO,CAACC,EAAE,CAAC,IAAI,CAAC;MAC3C,OAAOe,KAAK,GAAGhB,OAAO,CAACiB,KAAK,GAAGX,QAAQ;IAC3C,CAAC,EAAE,CAAC,CAAC;EACT,CAAC;EAED,MAAMY,aAAa,GAAGA,CAAA,KAAM;IACxB,OAAO/B,QAAQ,CAAC4B,MAAM,CAAC,CAACC,KAAK,EAAEhB,OAAO,KAAK;MACvC,OAAOgB,KAAK,IAAI3B,SAAS,CAACW,OAAO,CAACC,EAAE,CAAC,IAAI,CAAC,CAAC;IAC/C,CAAC,EAAE,CAAC,CAAC;EACT,CAAC;EAED,MAAMkB,YAAY,GAAG;IACjBhC,QAAQ;IACRE,SAAS;IACTe,SAAS;IACTI,cAAc;IACdG,kBAAkB;IAClBE,iBAAiB;IACjBC,iBAAiB;IACjBI;EACJ,CAAC;EAED,oBACIpC,OAAA,CAACC,WAAW,CAACqC,QAAQ;IAACC,KAAK,EAAEF,YAAa;IAAAG,QAAA,EACrCrC,KAAK,CAACqC;EAAQ;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACG,CAAC;AAE/B,CAAC;AAACxC,EAAA,CA1EIF,mBAAmB;AAAA2C,EAAA,GAAnB3C,mBAAmB;AA4EzB,eAAeA,mBAAmB;AAAC,IAAA2C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}