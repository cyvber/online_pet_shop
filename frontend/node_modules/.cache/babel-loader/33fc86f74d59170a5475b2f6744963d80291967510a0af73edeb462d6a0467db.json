{"ast":null,"code":"var _jsxFileName = \"/Users/nnt/Documents/Projects/Online_PetShop/frontend/src/context/ShopContext.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ShopContext = /*#__PURE__*/createContext(null);\nconst ShopContextProvider = props => {\n  _s();\n  const [products, setProducts] = useState([]); // State to store fetched product data\n  const [cartItems, setCartItems] = useState(() => {\n    // Load initial cart data from localStorage or initialize with empty object\n    const savedCart = localStorage.getItem(\"cartItems\");\n    return savedCart ? JSON.parse(savedCart) : {};\n  });\n\n  // Fetch product data from the backend\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const response = await fetch(\"http://localhost:4000/allproducts\");\n        if (!response.ok) {\n          throw new Error(\"Failed to fetch products\");\n        }\n        const data = await response.json();\n        if (!Array.isArray(data)) {\n          throw new Error(\"Invalid data format: Expected an array\");\n        }\n        setProducts(data);\n        if (!localStorage.getItem(\"cartItems\")) {\n          const initialCart = {};\n          data.forEach(product => {\n            initialCart[product.id] = 0;\n          });\n          setCartItems(initialCart);\n        }\n      } catch (error) {\n        console.error(\"Error fetching products:\", error);\n        setProducts([]); // Ensure `products` is an array even if fetch fails\n      }\n    };\n    fetchProducts();\n  }, []);\n\n  // Sync cart data with localStorage whenever cartItems changes\n  useEffect(() => {\n    localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n  }, [cartItems]);\n  const addToCart = (itemId, quantity = 1) => {\n    setCartItems(prev => ({\n      ...prev,\n      [itemId]: (prev[itemId] || 0) + quantity\n    }));\n  };\n  const removeFromCart = itemId => {\n    setCartItems(prev => ({\n      ...prev,\n      [itemId]: Math.max((prev[itemId] || 0) - 1, 0)\n    }));\n  };\n  const updateCartQuantity = (itemId, newQuantity) => {\n    setCartItems(prev => ({\n      ...prev,\n      [itemId]: newQuantity\n    }));\n  };\n  const clearItemFromCart = itemId => {\n    setCartItems(prev => ({\n      ...prev,\n      [itemId]: 0\n    }));\n  };\n  const getTotalCartValue = () => {\n    return products.reduce((total, product) => {\n      const quantity = cartItems[product.id] || 0;\n      return total + product.price * quantity;\n    }, 0);\n  };\n  const getTotalItems = () => {\n    return Object.values(cartItems).reduce((total, quantity) => total + quantity, 0);\n  };\n  const clearAllItemsFromCart = () => {\n    setCartItems({});\n  };\n  const contextValue = {\n    all_products: products,\n    // Renamed to match usage in ShopCategory.jsx\n    cartItems,\n    addToCart,\n    removeFromCart,\n    updateCartQuantity,\n    clearItemFromCart,\n    getTotalCartValue,\n    getTotalItems,\n    clearAllItemsFromCart\n  };\n  return /*#__PURE__*/_jsxDEV(ShopContext.Provider, {\n    value: contextValue,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 9\n  }, this);\n};\n_s(ShopContextProvider, \"gogD7gt7jyjl+EjN0ROV3LP8vns=\");\n_c = ShopContextProvider;\nexport default ShopContextProvider;\nvar _c;\n$RefreshReg$(_c, \"ShopContextProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","jsxDEV","_jsxDEV","ShopContext","ShopContextProvider","props","_s","products","setProducts","cartItems","setCartItems","savedCart","localStorage","getItem","JSON","parse","fetchProducts","response","fetch","ok","Error","data","json","Array","isArray","initialCart","forEach","product","id","error","console","setItem","stringify","addToCart","itemId","quantity","prev","removeFromCart","Math","max","updateCartQuantity","newQuantity","clearItemFromCart","getTotalCartValue","reduce","total","price","getTotalItems","Object","values","clearAllItemsFromCart","contextValue","all_products","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/nnt/Documents/Projects/Online_PetShop/frontend/src/context/ShopContext.jsx"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\n\nexport const ShopContext = createContext(null);\n\nconst ShopContextProvider = (props) => {\n    const [products, setProducts] = useState([]); // State to store fetched product data\n    const [cartItems, setCartItems] = useState(() => {\n        // Load initial cart data from localStorage or initialize with empty object\n        const savedCart = localStorage.getItem(\"cartItems\");\n        return savedCart ? JSON.parse(savedCart) : {};\n    });\n\n    // Fetch product data from the backend\n    useEffect(() => {\n    const fetchProducts = async () => {\n        try {\n            const response = await fetch(\"http://localhost:4000/allproducts\");\n            if (!response.ok) {\n                throw new Error(\"Failed to fetch products\");\n            }\n            const data = await response.json();\n            if (!Array.isArray(data)) {\n                throw new Error(\"Invalid data format: Expected an array\");\n            }\n            setProducts(data);\n\n            if (!localStorage.getItem(\"cartItems\")) {\n                const initialCart = {};\n                data.forEach((product) => {\n                    initialCart[product.id] = 0;\n                });\n                setCartItems(initialCart);\n            }\n        } catch (error) {\n            console.error(\"Error fetching products:\", error);\n            setProducts([]); // Ensure `products` is an array even if fetch fails\n        }\n    };\n\n    fetchProducts();\n}, []);\n\n\n    // Sync cart data with localStorage whenever cartItems changes\n    useEffect(() => {\n        localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n    }, [cartItems]);\n\n    const addToCart = (itemId, quantity = 1) => {\n        setCartItems((prev) => ({ ...prev, [itemId]: (prev[itemId] || 0) + quantity }));\n    };\n\n    const removeFromCart = (itemId) => {\n        setCartItems((prev) => ({\n            ...prev,\n            [itemId]: Math.max((prev[itemId] || 0) - 1, 0),\n        }));\n    };\n\n    const updateCartQuantity = (itemId, newQuantity) => {\n        setCartItems((prev) => ({ ...prev, [itemId]: newQuantity }));\n    };\n\n    const clearItemFromCart = (itemId) => {\n        setCartItems((prev) => ({ ...prev, [itemId]: 0 }));\n    };\n\n    const getTotalCartValue = () => {\n        return products.reduce((total, product) => {\n            const quantity = cartItems[product.id] || 0;\n            return total + product.price * quantity;\n        }, 0);\n    };\n\n    const getTotalItems = () => {\n        return Object.values(cartItems).reduce((total, quantity) => total + quantity, 0);\n    };\n\n    const clearAllItemsFromCart = () => {\n        setCartItems({});\n    };\n    \n    const contextValue = {\n        all_products: products, // Renamed to match usage in ShopCategory.jsx\n        cartItems,\n        addToCart,\n        removeFromCart,\n        updateCartQuantity,\n        clearItemFromCart,\n        getTotalCartValue,\n        getTotalItems,\n        clearAllItemsFromCart,\n    };\n\n    return (\n        <ShopContext.Provider value={contextValue}>\n            {props.children}\n        </ShopContext.Provider>\n    );\n};\n\nexport default ShopContextProvider;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}