{"ast":null,"code":"import React,{useContext,useState,useEffect}from'react';import{useParams}from'react-router-dom';import'./css/ShopBrand.css';import{ShopContext}from'../context/ShopContext';import Item from'../components/item/Item';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ShopDiscount=()=>{const{brandName}=useParams();const{all_products}=useContext(ShopContext);const[searchTerm,setSearchTerm]=useState('');const[visibleProducts,setVisibleProducts]=useState(12);// Number of products to show initially\nconst[isLoading,setIsLoading]=useState(false);// Filter products by brand and search term\nconst filteredProducts=all_products.filter(item=>{return item.on_discount&&(item.name.toLowerCase().includes(searchTerm.toLowerCase())||item.id.toString().includes(searchTerm)||item.description&&item.description.toLowerCase().includes(searchTerm.toLowerCase()));});// Infinite scrolling logic\nconst handleScroll=()=>{if(window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight-50&&!isLoading&&visibleProducts<filteredProducts.length){setIsLoading(true);setTimeout(()=>{setVisibleProducts(prev=>prev+12);// Load 12 more products\nsetIsLoading(false);},500);}};useEffect(()=>{window.addEventListener('scroll',handleScroll);return()=>window.removeEventListener('scroll',handleScroll);},[visibleProducts,isLoading,filteredProducts]);return/*#__PURE__*/_jsxs(\"div\",{className:\"brand\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"brand-title\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u05DE\\u05D1\\u05E6\\u05E2\\u05D9\\u05DD\"}),/*#__PURE__*/_jsx(\"p\",{children:brandName})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-bar\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u05D7\\u05E4\\u05E9 \\u05DC\\u05E4\\u05D9 \\u05DE\\u05D6\\u05D4\\u05D4, \\u05E9\\u05DD \\u05D0\\u05D5 \\u05EA\\u05D9\\u05D0\\u05D5\\u05E8...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"search-input\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-count\",children:[filteredProducts.length,\" \\u05DE\\u05D5\\u05E6\\u05E8\\u05D9\\u05DD\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"brand-products\",children:filteredProducts.length>0?filteredProducts.slice(0,visibleProducts).map((item,i)=>item.available&&/*#__PURE__*/_jsx(Item,{id:item.id,brand:item.brand,name:item.name,image:item.image,price:item.price,discount_type:item.discount_type,on_discount:item.on_discount// Pass on_discount to the Item component\n},item.id)):/*#__PURE__*/_jsx(\"p\",{className:\"no-results\",children:\"\\u05DC\\u05D0 \\u05E0\\u05DE\\u05E6\\u05D0\\u05D5 \\u05DE\\u05D5\\u05E6\\u05E8\\u05D9\\u05DD \\u05D4\\u05EA\\u05D5\\u05D0\\u05DE\\u05D9\\u05DD \\u05DC\\u05D7\\u05D9\\u05E4\\u05D5\\u05E9 \\u05E9\\u05DC\\u05DA.\"})}),isLoading&&/*#__PURE__*/_jsx(\"p\",{className:\"loading-message\",children:\"\\u05D8\\u05E2\\u05D9\\u05E0\\u05EA \\u05DE\\u05D5\\u05E6\\u05E8\\u05D9\\u05DD \\u05E0\\u05D5\\u05E1\\u05E4\\u05D9\\u05DD...\"})]})]});};export default ShopDiscount;","map":{"version":3,"names":["React","useContext","useState","useEffect","useParams","ShopContext","Item","jsx","_jsx","jsxs","_jsxs","ShopDiscount","brandName","all_products","searchTerm","setSearchTerm","visibleProducts","setVisibleProducts","isLoading","setIsLoading","filteredProducts","filter","item","on_discount","name","toLowerCase","includes","id","toString","description","handleScroll","window","innerHeight","document","documentElement","scrollTop","offsetHeight","length","setTimeout","prev","addEventListener","removeEventListener","className","children","type","placeholder","value","onChange","e","target","slice","map","i","available","brand","image","price","discount_type"],"sources":["/Users/nnt/Documents/Projects/Online_PetShop/Pet_Shop_Web/frontend/src/pages/ShopDiscount.jsx"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport './css/ShopBrand.css';\nimport { ShopContext } from '../context/ShopContext';\nimport Item from '../components/item/Item';\n\nconst ShopDiscount = () => {\n    const { brandName } = useParams();\n    const { all_products } = useContext(ShopContext);\n\n    const [searchTerm, setSearchTerm] = useState('');\n    const [visibleProducts, setVisibleProducts] = useState(12); // Number of products to show initially\n    const [isLoading, setIsLoading] = useState(false);\n\n    // Filter products by brand and search term\n    const filteredProducts = all_products.filter((item) => {\n        return (\n            item.on_discount &&\n            (\n                item.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                item.id.toString().includes(searchTerm) ||\n                (item.description && item.description.toLowerCase().includes(searchTerm.toLowerCase()))\n            )\n        );\n    });\n\n    // Infinite scrolling logic\n    const handleScroll = () => {\n        if (\n            window.innerHeight + document.documentElement.scrollTop >=\n                document.documentElement.offsetHeight - 50 &&\n            !isLoading &&\n            visibleProducts < filteredProducts.length\n        ) {\n            setIsLoading(true);\n            setTimeout(() => {\n                setVisibleProducts((prev) => prev + 12); // Load 12 more products\n                setIsLoading(false);\n            }, 500);\n        }\n    };\n\n    useEffect(() => {\n        window.addEventListener('scroll', handleScroll);\n        return () => window.removeEventListener('scroll', handleScroll);\n    }, [visibleProducts, isLoading, filteredProducts]);\n\n    return (\n        <div className=\"brand\">\n            <div className=\"brand-title\">\n                <h1>מבצעים</h1>\n                <p>{brandName}</p>\n            </div>\n            <div className=\"search-bar\">\n                <input\n                    type=\"text\"\n                    placeholder=\"חפש לפי מזהה, שם או תיאור...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"search-input\"\n                />\n                <div className=\"product-count\">\n                    {filteredProducts.length} מוצרים\n                </div>\n            </div>\n            <div className=\"content-container\">\n                <div className=\"brand-products\">\n                    {filteredProducts.length > 0 ? (\n                        filteredProducts.slice(0, visibleProducts).map((item, i) => (\n                            item.available && (\n                                <Item\n                                    key={item.id}\n                                    id={item.id}\n                                    brand={item.brand}\n                                    name={item.name}\n                                    image={item.image}\n                                    price={item.price}\n                                    discount_type={item.discount_type}\n                                    on_discount={item.on_discount} // Pass on_discount to the Item component\n                                />\n                            )\n                        ))\n                    ) : (\n                        <p className=\"no-results\">לא נמצאו מוצרים התואמים לחיפוש שלך.</p>\n                    )}\n                </div>\n\n                {isLoading && <p className=\"loading-message\">טעינת מוצרים נוספים...</p>}\n            </div>\n        </div>\n    );\n};\n\nexport default ShopDiscount;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}