{"ast":null,"code":"import React,{useContext,useState,useEffect}from'react';import{useParams}from'react-router-dom';import'./css/ShopBrand.css';import{ShopContext}from'../context/ShopContext';import Item from'../components/item/Item';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ShopBrand=()=>{const{brandName}=useParams();const{all_products,all_brands}=useContext(ShopContext);const[searchTerm,setSearchTerm]=useState('');const[visibleProducts,setVisibleProducts]=useState(12);// Number of products to show initially\nconst[isLoading,setIsLoading]=useState(false);const selectedBrand=all_brands.find(brand=>brand.name===brandName);// Filter products by brand and search term\nconst filteredProducts=all_products.filter(item=>{return item.brand===brandName&&(item.name.toLowerCase().includes(searchTerm.toLowerCase())||item.id.toString().includes(searchTerm)||item.description&&item.description.toLowerCase().includes(searchTerm.toLowerCase()));});// Infinite scrolling logic\nconst handleScroll=()=>{if(window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight-50&&!isLoading&&visibleProducts<filteredProducts.length){setIsLoading(true);setTimeout(()=>{setVisibleProducts(prev=>prev+12);// Load 12 more products\nsetIsLoading(false);},500);}};useEffect(()=>{window.addEventListener('scroll',handleScroll);return()=>window.removeEventListener('scroll',handleScroll);},[visibleProducts,isLoading,filteredProducts]);return/*#__PURE__*/_jsxs(\"div\",{className:\"brand\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"brand-title\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u05DE\\u05D5\\u05E6\\u05E8\\u05D9\\u05DD \\u05E9\\u05DC\"}),/*#__PURE__*/_jsx(\"p\",{children:brandName})]}),selectedBrand&&/*#__PURE__*/_jsx(\"p\",{className:\"brand-description\",children:selectedBrand.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-bar\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u05D7\\u05E4\\u05E9 \\u05DC\\u05E4\\u05D9 \\u05DE\\u05D6\\u05D4\\u05D4, \\u05E9\\u05DD \\u05D0\\u05D5 \\u05EA\\u05D9\\u05D0\\u05D5\\u05E8...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"search-input\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-count\",children:[filteredProducts.length,\" \\u05DE\\u05D5\\u05E6\\u05E8\\u05D9\\u05DD\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"brand-products\",children:filteredProducts.length>0?filteredProducts.slice(0,visibleProducts).map((item,i)=>/*#__PURE__*/_jsx(Item,{id:item.id,brand:item.brand,name:item.name,image:item.image,price:item.price,discount_type:item.discount_type,on_discount:item.on_discount// Pass on_discount to the Item component\n},item.id)):/*#__PURE__*/_jsx(\"p\",{className:\"no-results\",children:\"\\u05DC\\u05D0 \\u05E0\\u05DE\\u05E6\\u05D0\\u05D5 \\u05DE\\u05D5\\u05E6\\u05E8\\u05D9\\u05DD \\u05D4\\u05EA\\u05D5\\u05D0\\u05DE\\u05D9\\u05DD \\u05DC\\u05D7\\u05D9\\u05E4\\u05D5\\u05E9 \\u05E9\\u05DC\\u05DA.\"})}),isLoading&&/*#__PURE__*/_jsx(\"p\",{className:\"loading-message\",children:\"\\u05D8\\u05E2\\u05D9\\u05E0\\u05EA \\u05DE\\u05D5\\u05E6\\u05E8\\u05D9\\u05DD \\u05E0\\u05D5\\u05E1\\u05E4\\u05D9\\u05DD...\"})]})]});};export default ShopBrand;","map":{"version":3,"names":["React","useContext","useState","useEffect","useParams","ShopContext","Item","jsx","_jsx","jsxs","_jsxs","ShopBrand","brandName","all_products","all_brands","searchTerm","setSearchTerm","visibleProducts","setVisibleProducts","isLoading","setIsLoading","selectedBrand","find","brand","name","filteredProducts","filter","item","toLowerCase","includes","id","toString","description","handleScroll","window","innerHeight","document","documentElement","scrollTop","offsetHeight","length","setTimeout","prev","addEventListener","removeEventListener","className","children","type","placeholder","value","onChange","e","target","slice","map","i","image","price","discount_type","on_discount"],"sources":["/Users/nnt/Documents/Projects/Online_PetShop/Pet_Shop_Web/frontend/src/pages/ShopBrand.jsx"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport './css/ShopBrand.css';\nimport { ShopContext } from '../context/ShopContext';\nimport Item from '../components/item/Item';\n\nconst ShopBrand = () => {\n    const { brandName } = useParams();\n    const { all_products, all_brands } = useContext(ShopContext);\n\n    const [searchTerm, setSearchTerm] = useState('');\n    const [visibleProducts, setVisibleProducts] = useState(12); // Number of products to show initially\n    const [isLoading, setIsLoading] = useState(false);\n    const selectedBrand = all_brands.find((brand) => brand.name === brandName)\n    // Filter products by brand and search term\n    const filteredProducts = all_products.filter((item) => {\n        return (\n            item.brand === brandName &&\n            (\n                item.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                item.id.toString().includes(searchTerm) ||\n                (item.description && item.description.toLowerCase().includes(searchTerm.toLowerCase()))\n            )\n        );\n    });\n\n    // Infinite scrolling logic\n    const handleScroll = () => {\n        if (\n            window.innerHeight + document.documentElement.scrollTop >=\n                document.documentElement.offsetHeight - 50 &&\n            !isLoading &&\n            visibleProducts < filteredProducts.length\n        ) {\n            setIsLoading(true);\n            setTimeout(() => {\n                setVisibleProducts((prev) => prev + 12); // Load 12 more products\n                setIsLoading(false);\n            }, 500);\n        }\n    };\n\n    useEffect(() => {\n        window.addEventListener('scroll', handleScroll);\n        return () => window.removeEventListener('scroll', handleScroll);\n    }, [visibleProducts, isLoading, filteredProducts]);\n\n    return (\n        <div className=\"brand\">\n            <div className=\"brand-title\">\n                <h1>מוצרים של</h1>\n                <p>{brandName}</p>\n            </div>\n            {selectedBrand && <p className='brand-description'>{selectedBrand.description}</p>}\n            <div className=\"search-bar\">\n                <input\n                    type=\"text\"\n                    placeholder=\"חפש לפי מזהה, שם או תיאור...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"search-input\"\n                />\n                <div className=\"product-count\">\n                    {filteredProducts.length} מוצרים\n                </div>\n            </div>\n            <div className=\"content-container\">\n                <div className=\"brand-products\">\n                    {filteredProducts.length > 0 ? (\n                        filteredProducts.slice(0, visibleProducts).map((item, i) => (\n                            <Item\n                                key={item.id}\n                                id={item.id}\n                                brand={item.brand}\n                                name={item.name}\n                                image={item.image}\n                                price={item.price}\n                                discount_type={item.discount_type}\n                                on_discount={item.on_discount} // Pass on_discount to the Item component\n                            />\n                        ))\n                    ) : (\n                        <p className=\"no-results\">לא נמצאו מוצרים התואמים לחיפוש שלך.</p>\n                    )}\n                </div>\n\n                {isLoading && <p className=\"loading-message\">טעינת מוצרים נוספים...</p>}\n            </div>\n        </div>\n    );\n};\n\nexport default ShopBrand;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}