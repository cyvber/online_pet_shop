{"ast":null,"code":"import React,{useRef}from'react';import lock_icon from'../assets/frontend_assets/lock-icon.png';import'./Checkout.css';import DeliveryInfo from'../deliveryInfo/DeliveryInfo';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Checkout=_ref=>{let{totalCartValue,isCartEmpty}=_ref;const deliveryInfoRef=useRef();const totalPayment=totalCartValue=>totalCartValue+35;const handleCheckout=async()=>{const isValid=deliveryInfoRef.current.validate();if(!isValid){// Do not proceed to payment if fields are invalid\nreturn;}try{const response=await fetch('http://localhost:4000/create-paypal-order',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({amount:totalPayment(totalCartValue).toFixed(2)})});const data=await response.json();if(data&&data.url){window.location.href=data.url;}else{console.error('Error creating PayPal order:',data);alert('Unable to initiate payment. Please try again.');}}catch(error){console.error('Error during checkout:',error);alert('An error occurred. Please try again.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u05E4\\u05E8\\u05D8\\u05D9 \\u05DE\\u05E9\\u05DC\\u05D5\\u05D7\"}),/*#__PURE__*/_jsx(DeliveryInfo,{ref:deliveryInfoRef}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-total\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u05E1\\u05D4\\\"\\u05DB \\u05DE\\u05D7\\u05D9\\u05E8 \\u05D1\\u05E2\\u05D2\\u05DC\\u05D4:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20AA\",totalCartValue]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u05E1\\u05D4\\\"\\u05DB \\u05DE\\u05D7\\u05D9\\u05E8 \\u05DE\\u05E9\\u05DC\\u05D5\\u05D7:\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u20AA35.00\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-total-payment\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u05E1\\u05D4\\\"\\u05DB \\u05DC\\u05EA\\u05E9\\u05DC\\u05D5\\u05DD:\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20AA\",totalPayment(totalCartValue)]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"checkout-button-container\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"checkout-button\",disabled:isCartEmpty,onClick:handleCheckout,children:[\"\\u05D4\\u05DE\\u05E9\\u05DA \\u05DC\\u05EA\\u05E9\\u05DC\\u05D5\\u05DD\",/*#__PURE__*/_jsx(\"img\",{src:lock_icon,alt:\"\",className:\"checkoutbutton-lock-icon\"})]})})]});};export default Checkout;","map":{"version":3,"names":["React","useRef","lock_icon","DeliveryInfo","jsx","_jsx","jsxs","_jsxs","Checkout","_ref","totalCartValue","isCartEmpty","deliveryInfoRef","totalPayment","handleCheckout","isValid","current","validate","response","fetch","method","headers","body","JSON","stringify","amount","toFixed","data","json","url","window","location","href","console","error","alert","className","children","ref","disabled","onClick","src","alt"],"sources":["/Users/nnt/Documents/Projects/Online_PetShop/frontend/src/components/checkout/Checkout.jsx"],"sourcesContent":["import React, { useRef } from 'react';\nimport lock_icon from '../assets/frontend_assets/lock-icon.png';\nimport './Checkout.css';\nimport DeliveryInfo from '../deliveryInfo/DeliveryInfo';\n\nconst Checkout = ({ totalCartValue, isCartEmpty }) => {\n    const deliveryInfoRef = useRef();\n\n    const totalPayment = (totalCartValue) => totalCartValue + 35;\n\n    const handleCheckout = async () => {\n        const isValid = deliveryInfoRef.current.validate();\n        if (!isValid) {\n            // Do not proceed to payment if fields are invalid\n            return;\n        }\n\n        try {\n            const response = await fetch('http://localhost:4000/create-paypal-order', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    amount: totalPayment(totalCartValue).toFixed(2),\n                }),\n            });\n\n            const data = await response.json();\n            if (data && data.url) {\n                window.location.href = data.url;\n            } else {\n                console.error('Error creating PayPal order:', data);\n                alert('Unable to initiate payment. Please try again.');\n            }\n        } catch (error) {\n            console.error('Error during checkout:', error);\n            alert('An error occurred. Please try again.');\n        }\n    };\n\n    return (\n        <div className=\"checkout-section\">\n            <h2>פרטי משלוח</h2>\n            <DeliveryInfo ref={deliveryInfoRef} />\n\n            <div className=\"checkout-total\">\n                <div>\n                    <span>סה\"כ מחיר בעגלה:</span>\n                    <span>₪{totalCartValue}</span>\n                </div>\n                <div>\n                    <span>סה\"כ מחיר משלוח:</span>\n                    <span>₪35.00</span>\n                </div>\n                <div className=\"checkout-total-payment\">\n                    <span>סה\"כ לתשלום:</span>\n                    <span>₪{totalPayment(totalCartValue)}</span>\n                </div>\n            </div>\n\n            <div className=\"checkout-button-container\">\n                <button\n                    className=\"checkout-button\"\n                    disabled={isCartEmpty}\n                    onClick={handleCheckout}\n                >\n                    המשך לתשלום\n                    <img src={lock_icon} alt=\"\" className=\"checkoutbutton-lock-icon\" />\n                </button>\n            </div>\n        </div>\n    );\n};\n\nexport default Checkout;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,MAAM,KAAQ,OAAO,CACrC,MAAO,CAAAC,SAAS,KAAM,yCAAyC,CAC/D,MAAO,gBAAgB,CACvB,MAAO,CAAAC,YAAY,KAAM,8BAA8B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExD,KAAM,CAAAC,QAAQ,CAAGC,IAAA,EAAqC,IAApC,CAAEC,cAAc,CAAEC,WAAY,CAAC,CAAAF,IAAA,CAC7C,KAAM,CAAAG,eAAe,CAAGX,MAAM,CAAC,CAAC,CAEhC,KAAM,CAAAY,YAAY,CAAIH,cAAc,EAAKA,cAAc,CAAG,EAAE,CAE5D,KAAM,CAAAI,cAAc,CAAG,KAAAA,CAAA,GAAY,CAC/B,KAAM,CAAAC,OAAO,CAAGH,eAAe,CAACI,OAAO,CAACC,QAAQ,CAAC,CAAC,CAClD,GAAI,CAACF,OAAO,CAAE,CACV;AACA,OACJ,CAEA,GAAI,CACA,KAAM,CAAAG,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,2CAA2C,CAAE,CACtEC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACL,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACjBC,MAAM,CAAEZ,YAAY,CAACH,cAAc,CAAC,CAACgB,OAAO,CAAC,CAAC,CAClD,CAAC,CACL,CAAC,CAAC,CAEF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAT,QAAQ,CAACU,IAAI,CAAC,CAAC,CAClC,GAAID,IAAI,EAAIA,IAAI,CAACE,GAAG,CAAE,CAClBC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAGL,IAAI,CAACE,GAAG,CACnC,CAAC,IAAM,CACHI,OAAO,CAACC,KAAK,CAAC,8BAA8B,CAAEP,IAAI,CAAC,CACnDQ,KAAK,CAAC,+CAA+C,CAAC,CAC1D,CACJ,CAAE,MAAOD,KAAK,CAAE,CACZD,OAAO,CAACC,KAAK,CAAC,wBAAwB,CAAEA,KAAK,CAAC,CAC9CC,KAAK,CAAC,sCAAsC,CAAC,CACjD,CACJ,CAAC,CAED,mBACI5B,KAAA,QAAK6B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC7BhC,IAAA,OAAAgC,QAAA,CAAI,yDAAU,CAAI,CAAC,cACnBhC,IAAA,CAACF,YAAY,EAACmC,GAAG,CAAE1B,eAAgB,CAAE,CAAC,cAEtCL,KAAA,QAAK6B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC3B9B,KAAA,QAAA8B,QAAA,eACIhC,IAAA,SAAAgC,QAAA,CAAM,+EAAgB,CAAM,CAAC,cAC7B9B,KAAA,SAAA8B,QAAA,EAAM,QAAC,CAAC3B,cAAc,EAAO,CAAC,EAC7B,CAAC,cACNH,KAAA,QAAA8B,QAAA,eACIhC,IAAA,SAAAgC,QAAA,CAAM,+EAAgB,CAAM,CAAC,cAC7BhC,IAAA,SAAAgC,QAAA,CAAM,aAAM,CAAM,CAAC,EAClB,CAAC,cACN9B,KAAA,QAAK6B,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACnChC,IAAA,SAAAgC,QAAA,CAAM,4DAAY,CAAM,CAAC,cACzB9B,KAAA,SAAA8B,QAAA,EAAM,QAAC,CAACxB,YAAY,CAACH,cAAc,CAAC,EAAO,CAAC,EAC3C,CAAC,EACL,CAAC,cAENL,IAAA,QAAK+B,SAAS,CAAC,2BAA2B,CAAAC,QAAA,cACtC9B,KAAA,WACI6B,SAAS,CAAC,iBAAiB,CAC3BG,QAAQ,CAAE5B,WAAY,CACtB6B,OAAO,CAAE1B,cAAe,CAAAuB,QAAA,EAC3B,+DAEG,cAAAhC,IAAA,QAAKoC,GAAG,CAAEvC,SAAU,CAACwC,GAAG,CAAC,EAAE,CAACN,SAAS,CAAC,0BAA0B,CAAE,CAAC,EAC/D,CAAC,CACR,CAAC,EACL,CAAC,CAEd,CAAC,CAED,cAAe,CAAA5B,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}