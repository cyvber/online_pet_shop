{"ast":null,"code":"var _jsxFileName = \"/Users/nnt/Documents/Projects/Online_PetShop/frontend/src/context/ShopContext.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ShopContext = /*#__PURE__*/createContext(null);\nconst ShopContextProvider = props => {\n  _s();\n  const [products, setProducts] = useState([]); // State to store fetched product data\n  const [cartItems, setCartItems] = useState(() => {\n    // Load initial cart data from localStorage or initialize with empty object\n    const savedCart = localStorage.getItem(\"cartItems\");\n    return savedCart ? JSON.parse(savedCart) : {};\n  });\n\n  // Fetch product data from the backend\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const response = await fetch(\"http://localhost:4000/allproducts\");\n        const data = await response.json();\n        setProducts(data);\n      } catch (error) {\n        console.error(\"Error fetching products:\", error);\n      }\n    };\n    fetchProducts();\n  }, []);\n\n  // Sync cart data with localStorage whenever cartItems changes\n  useEffect(() => {\n    localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n  }, [cartItems]);\n  const addToCart = (itemId, quantity = 1) => {\n    setCartItems(prev => ({\n      ...prev,\n      [itemId]: (prev[itemId] || 0) + quantity\n    }));\n  };\n  const removeFromCart = itemId => {\n    setCartItems(prev => ({\n      ...prev,\n      [itemId]: Math.max((prev[itemId] || 0) - 1, 0)\n    }));\n  };\n  const updateCartQuantity = (itemId, newQuantity) => {\n    setCartItems(prev => ({\n      ...prev,\n      [itemId]: newQuantity\n    }));\n  };\n  const clearItemFromCart = itemId => {\n    setCartItems(prev => ({\n      ...prev,\n      [itemId]: 0\n    }));\n  };\n  const getTotalCartValue = () => {\n    return products.reduce((total, product) => {\n      const quantity = cartItems[product.id] || 0;\n      return total + product.price * quantity;\n    }, 0);\n  };\n  const getTotalItems = () => {\n    return Object.values(cartItems).reduce((total, quantity) => total + quantity, 0);\n  };\n  const clearAllItemsFromCart = () => {\n    setCartItems({});\n  };\n  const contextValue = {\n    all_products: products,\n    // Renamed to match usage in ShopCategory.jsx\n    cartItems,\n    addToCart,\n    removeFromCart,\n    updateCartQuantity,\n    clearItemFromCart,\n    getTotalCartValue,\n    getTotalItems,\n    clearAllItemsFromCart\n  };\n  return /*#__PURE__*/_jsxDEV(ShopContext.Provider, {\n    value: contextValue,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n};\n_s(ShopContextProvider, \"gogD7gt7jyjl+EjN0ROV3LP8vns=\");\n_c = ShopContextProvider;\nexport default ShopContextProvider;\nvar _c;\n$RefreshReg$(_c, \"ShopContextProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","jsxDEV","_jsxDEV","ShopContext","ShopContextProvider","props","_s","products","setProducts","cartItems","setCartItems","savedCart","localStorage","getItem","JSON","parse","fetchProducts","response","fetch","data","json","error","console","setItem","stringify","addToCart","itemId","quantity","prev","removeFromCart","Math","max","updateCartQuantity","newQuantity","clearItemFromCart","getTotalCartValue","reduce","total","product","id","price","getTotalItems","Object","values","clearAllItemsFromCart","contextValue","all_products","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/nnt/Documents/Projects/Online_PetShop/frontend/src/context/ShopContext.jsx"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\n\nexport const ShopContext = createContext(null);\n\nconst ShopContextProvider = (props) => {\n    const [products, setProducts] = useState([]); // State to store fetched product data\n    const [cartItems, setCartItems] = useState(() => {\n        // Load initial cart data from localStorage or initialize with empty object\n        const savedCart = localStorage.getItem(\"cartItems\");\n        return savedCart ? JSON.parse(savedCart) : {};\n    });\n\n    // Fetch product data from the backend\n    useEffect(() => {\n        const fetchProducts = async () => {\n            try {\n              const response = await fetch(\"http://localhost:4000/allproducts\"); \n              const data = await response.json();\n              setProducts(data); \n            } catch (error) {\n              console.error(\"Error fetching products:\", error);\n            }\n          };\n        fetchProducts();\n    }, []);\n\n    // Sync cart data with localStorage whenever cartItems changes\n    useEffect(() => {\n        localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n    }, [cartItems]);\n\n    const addToCart = (itemId, quantity = 1) => {\n        setCartItems((prev) => ({ ...prev, [itemId]: (prev[itemId] || 0) + quantity }));\n    };\n\n    const removeFromCart = (itemId) => {\n        setCartItems((prev) => ({\n            ...prev,\n            [itemId]: Math.max((prev[itemId] || 0) - 1, 0),\n        }));\n    };\n\n    const updateCartQuantity = (itemId, newQuantity) => {\n        setCartItems((prev) => ({ ...prev, [itemId]: newQuantity }));\n    };\n\n    const clearItemFromCart = (itemId) => {\n        setCartItems((prev) => ({ ...prev, [itemId]: 0 }));\n    };\n\n    const getTotalCartValue = () => {\n        return products.reduce((total, product) => {\n            const quantity = cartItems[product.id] || 0;\n            return total + product.price * quantity;\n        }, 0);\n    };\n\n    const getTotalItems = () => {\n        return Object.values(cartItems).reduce((total, quantity) => total + quantity, 0);\n    };\n\n    const clearAllItemsFromCart = () => {\n        setCartItems({});\n    };\n    \n    const contextValue = {\n        all_products: products, // Renamed to match usage in ShopCategory.jsx\n        cartItems,\n        addToCart,\n        removeFromCart,\n        updateCartQuantity,\n        clearItemFromCart,\n        getTotalCartValue,\n        getTotalItems,\n        clearAllItemsFromCart,\n    };\n\n    return (\n        <ShopContext.Provider value={contextValue}>\n            {props.children}\n        </ShopContext.Provider>\n    );\n};\n\nexport default ShopContextProvider;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}